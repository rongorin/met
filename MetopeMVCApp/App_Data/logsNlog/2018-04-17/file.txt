2018-04-17 10:14:51.4480|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: select cast(serverproperty('EngineEdition') as int)
2018-04-17 10:14:51.7582|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: select cast(serverproperty('EngineEdition') as int)
2018-04-17 10:14:53.5300|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:14:53.8142|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:14:54.6573|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:14:54.7484|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:14:54.8730|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:14:54.8730|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:14:54.8905|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: 
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.AspNetRoles','dbo.AspNetUserRoles','dbo.AspNetUsers','dbo.AspNetUserClaims','dbo.AspNetUserLogins')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-04-17 10:14:54.9990|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: 
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.AspNetRoles','dbo.AspNetUserRoles','dbo.AspNetUsers','dbo.AspNetUserClaims','dbo.AspNetUserLogins')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-04-17 10:14:55.6320|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-04-17 10:14:55.7091|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-04-17 10:14:55.7491|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (1) 
    [Project1].[C1] AS [C1], 
    [Project1].[MigrationId] AS [MigrationId], 
    [Project1].[Model] AS [Model], 
    [Project1].[ProductVersion] AS [ProductVersion]
    FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId], 
        [Extent1].[Model] AS [Model], 
        [Extent1].[ProductVersion] AS [ProductVersion], 
        1 AS [C1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [Project1]
    ORDER BY [Project1].[MigrationId] DESC
2018-04-17 10:14:55.7616|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (1) 
    [Project1].[C1] AS [C1], 
    [Project1].[MigrationId] AS [MigrationId], 
    [Project1].[Model] AS [Model], 
    [Project1].[ProductVersion] AS [ProductVersion]
    FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId], 
        [Extent1].[Model] AS [Model], 
        [Extent1].[ProductVersion] AS [ProductVersion], 
        1 AS [C1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [Project1]
    ORDER BY [Project1].[MigrationId] DESC
2018-04-17 10:14:56.0734|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[EntityIdScope] AS [EntityIdScope], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[EmailConfirmed] AS [EmailConfirmed], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[SecurityStamp] AS [SecurityStamp], 
    [Extent1].[PhoneNumber] AS [PhoneNumber], 
    [Extent1].[PhoneNumberConfirmed] AS [PhoneNumberConfirmed], 
    [Extent1].[TwoFactorEnabled] AS [TwoFactorEnabled], 
    [Extent1].[LockoutEndDateUtc] AS [LockoutEndDateUtc], 
    [Extent1].[LockoutEnabled] AS [LockoutEnabled], 
    [Extent1].[AccessFailedCount] AS [AccessFailedCount], 
    [Extent1].[UserName] AS [UserName]
    FROM [dbo].[AspNetUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @p0
2018-04-17 10:14:56.0824|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[EntityIdScope] AS [EntityIdScope], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[EmailConfirmed] AS [EmailConfirmed], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[SecurityStamp] AS [SecurityStamp], 
    [Extent1].[PhoneNumber] AS [PhoneNumber], 
    [Extent1].[PhoneNumberConfirmed] AS [PhoneNumberConfirmed], 
    [Extent1].[TwoFactorEnabled] AS [TwoFactorEnabled], 
    [Extent1].[LockoutEndDateUtc] AS [LockoutEndDateUtc], 
    [Extent1].[LockoutEnabled] AS [LockoutEnabled], 
    [Extent1].[AccessFailedCount] AS [AccessFailedCount], 
    [Extent1].[UserName] AS [UserName]
    FROM [dbo].[AspNetUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @p0
2018-04-17 10:14:56.1855|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[ClaimType] AS [ClaimType], 
    [Extent1].[ClaimValue] AS [ClaimValue]
    FROM [dbo].[AspNetUserClaims] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:14:56.1855|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[ClaimType] AS [ClaimType], 
    [Extent1].[ClaimValue] AS [ClaimValue]
    FROM [dbo].[AspNetUserClaims] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:14:56.2425|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[LoginProvider] AS [LoginProvider], 
    [Extent1].[ProviderKey] AS [ProviderKey], 
    [Extent1].[UserId] AS [UserId]
    FROM [dbo].[AspNetUserLogins] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:14:56.2475|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[LoginProvider] AS [LoginProvider], 
    [Extent1].[ProviderKey] AS [ProviderKey], 
    [Extent1].[UserId] AS [UserId]
    FROM [dbo].[AspNetUserLogins] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:14:56.2955|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[RoleId] AS [RoleId]
    FROM [dbo].[AspNetUserRoles] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:14:56.2955|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[RoleId] AS [RoleId]
    FROM [dbo].[AspNetUserRoles] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:14:57.3281|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[All_In_Price] AS [All_In_Price], 
    [Project1].[Clean_Price] AS [Clean_Price], 
    [Project1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
    [Project1].[Price_Source] AS [Price_Source], 
    [Project1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
    [Project1].[Discount_Rate] AS [Discount_Rate], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Issued_Amount] AS [Issued_Amount], 
    [Project1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Currency_Code] AS [Currency_Code], 
    [Project1].[ISO_Currency_Code] AS [ISO_Currency_Code], 
    [Project1].[Currency_Symbol] AS [Currency_Symbol], 
    [Project1].[Currency_Name] AS [Currency_Name], 
    [Project1].[System_Locked1] AS [System_Locked], 
    [Project1].[Currency_Security_ID] AS [Currency_Security_ID], 
    [Project1].[Synthetic_Security_ID] AS [Synthetic_Security_ID], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr1] AS [Price_Curr1], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked1], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Price_Curr] AS [Price_Curr], 
        [Extent1].[All_In_Price] AS [All_In_Price], 
        [Extent1].[Clean_Price] AS [Clean_Price], 
        [Extent1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
        [Extent1].[Price_Source] AS [Price_Source], 
        [Extent1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
        [Extent1].[Discount_Rate] AS [Discount_Rate], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Issued_Amount] AS [Issued_Amount], 
        [Extent1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr1], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Currency_Code] AS [Currency_Code], 
        [Extent3].[ISO_Currency_Code] AS [ISO_Currency_Code], 
        [Extent3].[Currency_Symbol] AS [Currency_Symbol], 
        [Extent3].[Currency_Name] AS [Currency_Name], 
        [Extent3].[System_Locked] AS [System_Locked1], 
        [Extent3].[Currency_Security_ID] AS [Currency_Security_ID], 
        [Extent3].[Synthetic_Security_ID] AS [Synthetic_Security_ID]
        FROM   [dbo].[Security_Price] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        INNER JOIN [dbo].[Currency] AS [Extent3] ON [Extent1].[Price_Curr] = [Extent3].[Currency_Code]
        WHERE ((CASE WHEN (@p__linq__0 IS NOT NULL) THEN CASE WHEN ([Extent1].[Security_ID] = @p__linq__1) THEN cast(1 as bit) WHEN ( NOT (([Extent1].[Security_ID] = @p__linq__1) AND (0 = (CASE WHEN (@p__linq__1 IS NULL) THEN cast(1 as bit) ELSE cast(0 as bit) END)))) THEN cast(0 as bit) END WHEN ([Extent1].[Security_ID] > cast(0 as decimal(18))) THEN cast(1 as bit) WHEN ( NOT ([Extent1].[Security_ID] > cast(0 as decimal(18)))) THEN cast(0 as bit) END) = 1) AND ([Extent1].[Entity_ID] IN (@p__linq__2,@p__linq__3))
    )  AS [Project1]
    ORDER BY [Project1].[Ticker] ASC
2018-04-17 10:14:57.3972|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[All_In_Price] AS [All_In_Price], 
    [Project1].[Clean_Price] AS [Clean_Price], 
    [Project1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
    [Project1].[Price_Source] AS [Price_Source], 
    [Project1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
    [Project1].[Discount_Rate] AS [Discount_Rate], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Issued_Amount] AS [Issued_Amount], 
    [Project1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Currency_Code] AS [Currency_Code], 
    [Project1].[ISO_Currency_Code] AS [ISO_Currency_Code], 
    [Project1].[Currency_Symbol] AS [Currency_Symbol], 
    [Project1].[Currency_Name] AS [Currency_Name], 
    [Project1].[System_Locked1] AS [System_Locked], 
    [Project1].[Currency_Security_ID] AS [Currency_Security_ID], 
    [Project1].[Synthetic_Security_ID] AS [Synthetic_Security_ID], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr1] AS [Price_Curr1], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked1], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Price_Curr] AS [Price_Curr], 
        [Extent1].[All_In_Price] AS [All_In_Price], 
        [Extent1].[Clean_Price] AS [Clean_Price], 
        [Extent1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
        [Extent1].[Price_Source] AS [Price_Source], 
        [Extent1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
        [Extent1].[Discount_Rate] AS [Discount_Rate], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Issued_Amount] AS [Issued_Amount], 
        [Extent1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr1], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Currency_Code] AS [Currency_Code], 
        [Extent3].[ISO_Currency_Code] AS [ISO_Currency_Code], 
        [Extent3].[Currency_Symbol] AS [Currency_Symbol], 
        [Extent3].[Currency_Name] AS [Currency_Name], 
        [Extent3].[System_Locked] AS [System_Locked1], 
        [Extent3].[Currency_Security_ID] AS [Currency_Security_ID], 
        [Extent3].[Synthetic_Security_ID] AS [Synthetic_Security_ID]
        FROM   [dbo].[Security_Price] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        INNER JOIN [dbo].[Currency] AS [Extent3] ON [Extent1].[Price_Curr] = [Extent3].[Currency_Code]
        WHERE ((CASE WHEN (@p__linq__0 IS NOT NULL) THEN CASE WHEN ([Extent1].[Security_ID] = @p__linq__1) THEN cast(1 as bit) WHEN ( NOT (([Extent1].[Security_ID] = @p__linq__1) AND (0 = (CASE WHEN (@p__linq__1 IS NULL) THEN cast(1 as bit) ELSE cast(0 as bit) END)))) THEN cast(0 as bit) END WHEN ([Extent1].[Security_ID] > cast(0 as decimal(18))) THEN cast(1 as bit) WHEN ( NOT ([Extent1].[Security_ID] > cast(0 as decimal(18)))) THEN cast(0 as bit) END) = 1) AND ([Extent1].[Entity_ID] IN (@p__linq__2,@p__linq__3))
    )  AS [Project1]
    ORDER BY [Project1].[Ticker] ASC
2018-04-17 10:15:09.6821|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:15:09.6851|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:15:09.7041|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:15:09.7041|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:15:09.7271|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[EntityIdScope] AS [EntityIdScope], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[EmailConfirmed] AS [EmailConfirmed], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[SecurityStamp] AS [SecurityStamp], 
    [Extent1].[PhoneNumber] AS [PhoneNumber], 
    [Extent1].[PhoneNumberConfirmed] AS [PhoneNumberConfirmed], 
    [Extent1].[TwoFactorEnabled] AS [TwoFactorEnabled], 
    [Extent1].[LockoutEndDateUtc] AS [LockoutEndDateUtc], 
    [Extent1].[LockoutEnabled] AS [LockoutEnabled], 
    [Extent1].[AccessFailedCount] AS [AccessFailedCount], 
    [Extent1].[UserName] AS [UserName]
    FROM [dbo].[AspNetUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @p0
2018-04-17 10:15:09.7331|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[EntityIdScope] AS [EntityIdScope], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[EmailConfirmed] AS [EmailConfirmed], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[SecurityStamp] AS [SecurityStamp], 
    [Extent1].[PhoneNumber] AS [PhoneNumber], 
    [Extent1].[PhoneNumberConfirmed] AS [PhoneNumberConfirmed], 
    [Extent1].[TwoFactorEnabled] AS [TwoFactorEnabled], 
    [Extent1].[LockoutEndDateUtc] AS [LockoutEndDateUtc], 
    [Extent1].[LockoutEnabled] AS [LockoutEnabled], 
    [Extent1].[AccessFailedCount] AS [AccessFailedCount], 
    [Extent1].[UserName] AS [UserName]
    FROM [dbo].[AspNetUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @p0
2018-04-17 10:15:09.7331|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[ClaimType] AS [ClaimType], 
    [Extent1].[ClaimValue] AS [ClaimValue]
    FROM [dbo].[AspNetUserClaims] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:15:09.7466|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[ClaimType] AS [ClaimType], 
    [Extent1].[ClaimValue] AS [ClaimValue]
    FROM [dbo].[AspNetUserClaims] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:15:09.7466|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[LoginProvider] AS [LoginProvider], 
    [Extent1].[ProviderKey] AS [ProviderKey], 
    [Extent1].[UserId] AS [UserId]
    FROM [dbo].[AspNetUserLogins] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:15:09.7662|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[LoginProvider] AS [LoginProvider], 
    [Extent1].[ProviderKey] AS [ProviderKey], 
    [Extent1].[UserId] AS [UserId]
    FROM [dbo].[AspNetUserLogins] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:15:09.7662|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[RoleId] AS [RoleId]
    FROM [dbo].[AspNetUserRoles] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:15:09.7832|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[RoleId] AS [RoleId]
    FROM [dbo].[AspNetUserRoles] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 10:15:10.0119|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (2) 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Entity_Code] AS [Entity_Code], 
    [Extent1].[Entity_Name] AS [Entity_Name], 
    [Extent1].[Import_Folder] AS [Import_Folder], 
    [Extent1].[Export_Folder] AS [Export_Folder]
    FROM [dbo].[Entity] AS [Extent1]
    WHERE [Extent1].[Entity_ID] = @p0
2018-04-17 10:15:10.0474|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (2) 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Entity_Code] AS [Entity_Code], 
    [Extent1].[Entity_Name] AS [Entity_Name], 
    [Extent1].[Import_Folder] AS [Import_Folder], 
    [Extent1].[Export_Folder] AS [Export_Folder]
    FROM [dbo].[Entity] AS [Extent1]
    WHERE [Extent1].[Entity_ID] = @p0
2018-04-17 10:18:13.7445|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:18:14.0307|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:18:14.1673|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[All_In_Price] AS [All_In_Price], 
    [Project1].[Clean_Price] AS [Clean_Price], 
    [Project1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
    [Project1].[Price_Source] AS [Price_Source], 
    [Project1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
    [Project1].[Discount_Rate] AS [Discount_Rate], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Issued_Amount] AS [Issued_Amount], 
    [Project1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Currency_Code] AS [Currency_Code], 
    [Project1].[ISO_Currency_Code] AS [ISO_Currency_Code], 
    [Project1].[Currency_Symbol] AS [Currency_Symbol], 
    [Project1].[Currency_Name] AS [Currency_Name], 
    [Project1].[System_Locked1] AS [System_Locked], 
    [Project1].[Currency_Security_ID] AS [Currency_Security_ID], 
    [Project1].[Synthetic_Security_ID] AS [Synthetic_Security_ID], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr1] AS [Price_Curr1], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked1], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Price_Curr] AS [Price_Curr], 
        [Extent1].[All_In_Price] AS [All_In_Price], 
        [Extent1].[Clean_Price] AS [Clean_Price], 
        [Extent1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
        [Extent1].[Price_Source] AS [Price_Source], 
        [Extent1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
        [Extent1].[Discount_Rate] AS [Discount_Rate], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Issued_Amount] AS [Issued_Amount], 
        [Extent1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr1], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Currency_Code] AS [Currency_Code], 
        [Extent3].[ISO_Currency_Code] AS [ISO_Currency_Code], 
        [Extent3].[Currency_Symbol] AS [Currency_Symbol], 
        [Extent3].[Currency_Name] AS [Currency_Name], 
        [Extent3].[System_Locked] AS [System_Locked1], 
        [Extent3].[Currency_Security_ID] AS [Currency_Security_ID], 
        [Extent3].[Synthetic_Security_ID] AS [Synthetic_Security_ID]
        FROM   [dbo].[Security_Price] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        INNER JOIN [dbo].[Currency] AS [Extent3] ON [Extent1].[Price_Curr] = [Extent3].[Currency_Code]
        WHERE ((CASE WHEN (@p__linq__0 IS NOT NULL) THEN CASE WHEN ([Extent1].[Security_ID] = @p__linq__1) THEN cast(1 as bit) WHEN ( NOT (([Extent1].[Security_ID] = @p__linq__1) AND (0 = (CASE WHEN (@p__linq__1 IS NULL) THEN cast(1 as bit) ELSE cast(0 as bit) END)))) THEN cast(0 as bit) END WHEN ([Extent1].[Security_ID] > cast(0 as decimal(18))) THEN cast(1 as bit) WHEN ( NOT ([Extent1].[Security_ID] > cast(0 as decimal(18)))) THEN cast(0 as bit) END) = 1) AND ([Extent1].[Entity_ID] IN (@p__linq__2,@p__linq__3))
    )  AS [Project1]
    ORDER BY [Project1].[Ticker] ASC
2018-04-17 10:18:14.3369|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[All_In_Price] AS [All_In_Price], 
    [Project1].[Clean_Price] AS [Clean_Price], 
    [Project1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
    [Project1].[Price_Source] AS [Price_Source], 
    [Project1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
    [Project1].[Discount_Rate] AS [Discount_Rate], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Issued_Amount] AS [Issued_Amount], 
    [Project1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Currency_Code] AS [Currency_Code], 
    [Project1].[ISO_Currency_Code] AS [ISO_Currency_Code], 
    [Project1].[Currency_Symbol] AS [Currency_Symbol], 
    [Project1].[Currency_Name] AS [Currency_Name], 
    [Project1].[System_Locked1] AS [System_Locked], 
    [Project1].[Currency_Security_ID] AS [Currency_Security_ID], 
    [Project1].[Synthetic_Security_ID] AS [Synthetic_Security_ID], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr1] AS [Price_Curr1], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked1], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Price_Curr] AS [Price_Curr], 
        [Extent1].[All_In_Price] AS [All_In_Price], 
        [Extent1].[Clean_Price] AS [Clean_Price], 
        [Extent1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
        [Extent1].[Price_Source] AS [Price_Source], 
        [Extent1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
        [Extent1].[Discount_Rate] AS [Discount_Rate], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Issued_Amount] AS [Issued_Amount], 
        [Extent1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr1], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Currency_Code] AS [Currency_Code], 
        [Extent3].[ISO_Currency_Code] AS [ISO_Currency_Code], 
        [Extent3].[Currency_Symbol] AS [Currency_Symbol], 
        [Extent3].[Currency_Name] AS [Currency_Name], 
        [Extent3].[System_Locked] AS [System_Locked1], 
        [Extent3].[Currency_Security_ID] AS [Currency_Security_ID], 
        [Extent3].[Synthetic_Security_ID] AS [Synthetic_Security_ID]
        FROM   [dbo].[Security_Price] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        INNER JOIN [dbo].[Currency] AS [Extent3] ON [Extent1].[Price_Curr] = [Extent3].[Currency_Code]
        WHERE ((CASE WHEN (@p__linq__0 IS NOT NULL) THEN CASE WHEN ([Extent1].[Security_ID] = @p__linq__1) THEN cast(1 as bit) WHEN ( NOT (([Extent1].[Security_ID] = @p__linq__1) AND (0 = (CASE WHEN (@p__linq__1 IS NULL) THEN cast(1 as bit) ELSE cast(0 as bit) END)))) THEN cast(0 as bit) END WHEN ([Extent1].[Security_ID] > cast(0 as decimal(18))) THEN cast(1 as bit) WHEN ( NOT ([Extent1].[Security_ID] > cast(0 as decimal(18)))) THEN cast(0 as bit) END) = 1) AND ([Extent1].[Entity_ID] IN (@p__linq__2,@p__linq__3))
    )  AS [Project1]
    ORDER BY [Project1].[Ticker] ASC
2018-04-17 10:18:18.2566|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:18:18.2566|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:18:18.2686|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:18:18.2686|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:22:32.0734|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:22:32.3787|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:22:32.5483|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[All_In_Price] AS [All_In_Price], 
    [Project1].[Clean_Price] AS [Clean_Price], 
    [Project1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
    [Project1].[Price_Source] AS [Price_Source], 
    [Project1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
    [Project1].[Discount_Rate] AS [Discount_Rate], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Issued_Amount] AS [Issued_Amount], 
    [Project1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Currency_Code] AS [Currency_Code], 
    [Project1].[ISO_Currency_Code] AS [ISO_Currency_Code], 
    [Project1].[Currency_Symbol] AS [Currency_Symbol], 
    [Project1].[Currency_Name] AS [Currency_Name], 
    [Project1].[System_Locked1] AS [System_Locked], 
    [Project1].[Currency_Security_ID] AS [Currency_Security_ID], 
    [Project1].[Synthetic_Security_ID] AS [Synthetic_Security_ID], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr1] AS [Price_Curr1], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked1], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Price_Curr] AS [Price_Curr], 
        [Extent1].[All_In_Price] AS [All_In_Price], 
        [Extent1].[Clean_Price] AS [Clean_Price], 
        [Extent1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
        [Extent1].[Price_Source] AS [Price_Source], 
        [Extent1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
        [Extent1].[Discount_Rate] AS [Discount_Rate], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Issued_Amount] AS [Issued_Amount], 
        [Extent1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr1], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Currency_Code] AS [Currency_Code], 
        [Extent3].[ISO_Currency_Code] AS [ISO_Currency_Code], 
        [Extent3].[Currency_Symbol] AS [Currency_Symbol], 
        [Extent3].[Currency_Name] AS [Currency_Name], 
        [Extent3].[System_Locked] AS [System_Locked1], 
        [Extent3].[Currency_Security_ID] AS [Currency_Security_ID], 
        [Extent3].[Synthetic_Security_ID] AS [Synthetic_Security_ID]
        FROM   [dbo].[Security_Price] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        INNER JOIN [dbo].[Currency] AS [Extent3] ON [Extent1].[Price_Curr] = [Extent3].[Currency_Code]
        WHERE ((CASE WHEN (@p__linq__0 IS NOT NULL) THEN CASE WHEN ([Extent1].[Security_ID] = @p__linq__1) THEN cast(1 as bit) WHEN ( NOT (([Extent1].[Security_ID] = @p__linq__1) AND (0 = (CASE WHEN (@p__linq__1 IS NULL) THEN cast(1 as bit) ELSE cast(0 as bit) END)))) THEN cast(0 as bit) END WHEN ([Extent1].[Security_ID] > cast(0 as decimal(18))) THEN cast(1 as bit) WHEN ( NOT ([Extent1].[Security_ID] > cast(0 as decimal(18)))) THEN cast(0 as bit) END) = 1) AND ([Extent1].[Entity_ID] IN (@p__linq__2,@p__linq__3))
    )  AS [Project1]
    ORDER BY [Project1].[Ticker] ASC
2018-04-17 10:22:32.6253|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[All_In_Price] AS [All_In_Price], 
    [Project1].[Clean_Price] AS [Clean_Price], 
    [Project1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
    [Project1].[Price_Source] AS [Price_Source], 
    [Project1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
    [Project1].[Discount_Rate] AS [Discount_Rate], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Issued_Amount] AS [Issued_Amount], 
    [Project1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Currency_Code] AS [Currency_Code], 
    [Project1].[ISO_Currency_Code] AS [ISO_Currency_Code], 
    [Project1].[Currency_Symbol] AS [Currency_Symbol], 
    [Project1].[Currency_Name] AS [Currency_Name], 
    [Project1].[System_Locked1] AS [System_Locked], 
    [Project1].[Currency_Security_ID] AS [Currency_Security_ID], 
    [Project1].[Synthetic_Security_ID] AS [Synthetic_Security_ID], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr1] AS [Price_Curr1], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked1], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Price_Curr] AS [Price_Curr], 
        [Extent1].[All_In_Price] AS [All_In_Price], 
        [Extent1].[Clean_Price] AS [Clean_Price], 
        [Extent1].[Accrued_Income_Price] AS [Accrued_Income_Price], 
        [Extent1].[Price_Source] AS [Price_Source], 
        [Extent1].[Yield_To_Maturity] AS [Yield_To_Maturity], 
        [Extent1].[Discount_Rate] AS [Discount_Rate], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Issued_Amount] AS [Issued_Amount], 
        [Extent1].[Free_Float_Issued_Amount] AS [Free_Float_Issued_Amount], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr1], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Currency_Code] AS [Currency_Code], 
        [Extent3].[ISO_Currency_Code] AS [ISO_Currency_Code], 
        [Extent3].[Currency_Symbol] AS [Currency_Symbol], 
        [Extent3].[Currency_Name] AS [Currency_Name], 
        [Extent3].[System_Locked] AS [System_Locked1], 
        [Extent3].[Currency_Security_ID] AS [Currency_Security_ID], 
        [Extent3].[Synthetic_Security_ID] AS [Synthetic_Security_ID]
        FROM   [dbo].[Security_Price] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        INNER JOIN [dbo].[Currency] AS [Extent3] ON [Extent1].[Price_Curr] = [Extent3].[Currency_Code]
        WHERE ((CASE WHEN (@p__linq__0 IS NOT NULL) THEN CASE WHEN ([Extent1].[Security_ID] = @p__linq__1) THEN cast(1 as bit) WHEN ( NOT (([Extent1].[Security_ID] = @p__linq__1) AND (0 = (CASE WHEN (@p__linq__1 IS NULL) THEN cast(1 as bit) ELSE cast(0 as bit) END)))) THEN cast(0 as bit) END WHEN ([Extent1].[Security_ID] > cast(0 as decimal(18))) THEN cast(1 as bit) WHEN ( NOT ([Extent1].[Security_ID] > cast(0 as decimal(18)))) THEN cast(0 as bit) END) = 1) AND ([Extent1].[Entity_ID] IN (@p__linq__2,@p__linq__3))
    )  AS [Project1]
    ORDER BY [Project1].[Ticker] ASC
2018-04-17 10:22:32.7654|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:22:32.9536|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:22:33.0561|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 10:22:33.2117|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:05.0891|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:03:05.2157|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:03:09.7008|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:09.7853|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:09.8834|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:09.8834|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:09.8994|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[EntityIdScope] AS [EntityIdScope], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[EmailConfirmed] AS [EmailConfirmed], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[SecurityStamp] AS [SecurityStamp], 
    [Extent1].[PhoneNumber] AS [PhoneNumber], 
    [Extent1].[PhoneNumberConfirmed] AS [PhoneNumberConfirmed], 
    [Extent1].[TwoFactorEnabled] AS [TwoFactorEnabled], 
    [Extent1].[LockoutEndDateUtc] AS [LockoutEndDateUtc], 
    [Extent1].[LockoutEnabled] AS [LockoutEnabled], 
    [Extent1].[AccessFailedCount] AS [AccessFailedCount], 
    [Extent1].[UserName] AS [UserName]
    FROM [dbo].[AspNetUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @p0
2018-04-17 11:03:09.9125|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[EntityIdScope] AS [EntityIdScope], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[EmailConfirmed] AS [EmailConfirmed], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[SecurityStamp] AS [SecurityStamp], 
    [Extent1].[PhoneNumber] AS [PhoneNumber], 
    [Extent1].[PhoneNumberConfirmed] AS [PhoneNumberConfirmed], 
    [Extent1].[TwoFactorEnabled] AS [TwoFactorEnabled], 
    [Extent1].[LockoutEndDateUtc] AS [LockoutEndDateUtc], 
    [Extent1].[LockoutEnabled] AS [LockoutEnabled], 
    [Extent1].[AccessFailedCount] AS [AccessFailedCount], 
    [Extent1].[UserName] AS [UserName]
    FROM [dbo].[AspNetUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @p0
2018-04-17 11:03:09.9275|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[ClaimType] AS [ClaimType], 
    [Extent1].[ClaimValue] AS [ClaimValue]
    FROM [dbo].[AspNetUserClaims] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 11:03:09.9375|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[ClaimType] AS [ClaimType], 
    [Extent1].[ClaimValue] AS [ClaimValue]
    FROM [dbo].[AspNetUserClaims] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 11:03:09.9375|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[LoginProvider] AS [LoginProvider], 
    [Extent1].[ProviderKey] AS [ProviderKey], 
    [Extent1].[UserId] AS [UserId]
    FROM [dbo].[AspNetUserLogins] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 11:03:09.9535|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[LoginProvider] AS [LoginProvider], 
    [Extent1].[ProviderKey] AS [ProviderKey], 
    [Extent1].[UserId] AS [UserId]
    FROM [dbo].[AspNetUserLogins] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 11:03:09.9535|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[RoleId] AS [RoleId]
    FROM [dbo].[AspNetUserRoles] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 11:03:09.9725|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[RoleId] AS [RoleId]
    FROM [dbo].[AspNetUserRoles] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 11:03:09.9895|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (2) 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Entity_Code] AS [Entity_Code], 
    [Extent1].[Entity_Name] AS [Entity_Name], 
    [Extent1].[Import_Folder] AS [Import_Folder], 
    [Extent1].[Export_Folder] AS [Export_Folder]
    FROM [dbo].[Entity] AS [Extent1]
    WHERE [Extent1].[Entity_ID] = @p0
2018-04-17 11:03:10.0186|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (2) 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Entity_Code] AS [Entity_Code], 
    [Extent1].[Entity_Name] AS [Entity_Name], 
    [Extent1].[Import_Folder] AS [Import_Folder], 
    [Extent1].[Export_Folder] AS [Export_Folder]
    FROM [dbo].[Entity] AS [Extent1]
    WHERE [Extent1].[Entity_ID] = @p0
2018-04-17 11:03:48.2714|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:48.3315|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:48.5842|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:03:48.6287|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:03:48.8464|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:03:48.8864|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:03:50.6332|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:03:50.7447|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:03:54.8544|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:03:54.8674|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:03:54.8794|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:03:54.8794|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:03:54.9060|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:54.9060|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:54.9060|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:54.9060|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:55.6685|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:03:55.6685|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:03:55.7696|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:55.7696|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:55.7806|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:03:55.7806|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:04:01.9054|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:04:02.0024|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:04:02.0665|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:04:02.2126|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:04:02.4042|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:04:02.5383|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:04:09.4427|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:04:09.4938|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:04:09.5478|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:04:09.6764|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:04:09.7945|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:04:09.7945|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:05:21.2843|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:05:21.4325|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:05:25.3126|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:05:25.3956|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:05:25.4421|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:05:25.4421|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:05:52.6009|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:05:52.6174|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:05:55.9665|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:05:55.9665|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:05:55.9665|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:05:55.9665|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:10:54.6754|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:10:54.7274|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:10:57.3719|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:10:57.4009|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:10:57.4342|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:10:57.4342|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:11:29.8720|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:11:29.9030|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:11:32.9385|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:11:32.9525|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:11:32.9525|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:11:32.9525|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:10.2106|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:16:10.2622|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:16:14.1729|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:14.2355|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:14.2800|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:14.2800|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:29.9627|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:16:30.0008|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:16:30.0874|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:30.0914|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:30.0914|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:30.0914|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:49.6242|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:16:49.6888|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:16:49.6888|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:16:49.7098|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:16:49.7148|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:16:49.8249|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:16:49.9045|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:16:49.9255|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:16:49.9340|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:16:49.9340|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:16:49.9630|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:49.9655|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:49.9655|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:16:49.9655|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:00.1219|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:17:00.1429|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:17:00.1429|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:17:00.1599|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:17:00.1714|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:17:00.1714|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:17:00.2314|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:00.2314|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:00.2475|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:00.2745|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:00.2915|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:00.2945|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:00.2945|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:00.3120|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:19.5511|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:17:19.5731|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:17:19.5781|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:17:19.6051|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:17:19.6051|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:17:19.6987|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:17:19.7438|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:19.7573|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:19.7633|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:19.7633|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:19.7828|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:19.9104|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:20.0009|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:20.0009|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:32.8049|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:17:32.8199|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:17:32.8249|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:17:32.8249|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:17:32.8430|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:17:32.8430|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:17:32.8950|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:32.8950|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:32.9115|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:32.9295|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:32.9430|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:32.9641|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:32.9726|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:32.9726|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:49.7750|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:17:49.8251|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:17:49.8251|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:17:49.8251|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:17:49.8441|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:17:49.8731|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:17:49.9192|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:49.9192|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:49.9337|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:49.9337|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:17:49.9567|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:49.9567|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:49.9667|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:17:49.9667|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:18:22.2009|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:18:22.2279|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:18:22.2319|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:18:22.2855|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:18:22.3055|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:18:22.4111|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:18:22.4811|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:18:22.4811|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:18:37.9872|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:18:38.0072|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:18:38.0132|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:18:38.0392|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:18:38.0432|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:18:38.0432|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:18:38.0813|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:18:38.0928|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:18:38.0928|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:18:38.1128|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:18:38.1248|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:18:38.1248|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:18:38.1523|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:18:38.1523|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:19:13.9593|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:19:13.9593|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:19:13.9703|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:19:13.9823|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:19:13.9823|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:19:14.0093|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:19:14.0334|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:19:14.0334|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:19:14.0484|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:19:14.0604|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:19:14.0834|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:19:14.0834|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:19:14.0954|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:19:14.0954|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:19:19.7758|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:19:19.8369|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:19:19.8439|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:19:19.8579|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:19:19.8579|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:19:19.8889|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:19:19.9274|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:19:19.9555|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:19:19.9555|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:19:19.9710|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:19:19.9980|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:19:19.9980|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:19:20.0145|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:19:20.0145|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:20:45.8188|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:20:45.8828|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:20:45.8888|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:20:45.8888|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:20:45.9074|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:20:45.9879|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:20:50.2594|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:20:50.2799|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:20:50.2799|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:20:50.2929|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:20:50.3285|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:20:50.4616|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:20:50.5516|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:20:50.5516|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:21:30.4717|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:21:30.4838|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:21:30.4838|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:21:30.4988|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:21:30.4988|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:21:30.5238|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:21:30.5848|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:21:30.6038|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:21:30.6099|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:21:30.6444|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:21:30.6579|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:21:30.6704|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:21:30.7109|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:21:30.7239|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:32:13.5639|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:32:13.6460|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:32:17.7132|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:32:17.7723|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:32:17.8474|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:32:17.8474|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:33:41.3569|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:33:41.4399|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:33:45.7113|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:33:45.7633|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:33:45.8324|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:33:45.8324|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:34:31.5849|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:34:31.5940|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:34:35.6711|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:34:35.6711|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:34:35.6711|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:34:35.6711|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:35:36.8233|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:35:36.8813|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:35:40.7154|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:35:40.9160|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:35:41.0672|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:35:41.0672|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:36:33.5068|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:36:33.5689|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:36:37.6737|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:36:37.7522|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:36:37.8143|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:36:37.8143|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:36:56.4253|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:36:56.4969|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:37:00.7014|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:37:00.8245|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:37:00.9511|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:37:00.9511|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:37:18.2463|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:37:18.2463|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:37:22.2536|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:37:22.2536|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:37:22.2536|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:37:22.2646|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:37:45.0373|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:37:45.0643|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:37:45.1129|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:37:45.1129|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:37:45.1224|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:37:45.1224|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:22.4257|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:38:22.4918|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:38:22.5348|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:22.6394|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:22.7165|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:22.7165|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:28.3353|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:38:28.3763|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 11:38:28.4289|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:28.4374|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:28.4374|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:28.4374|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:54.2967|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:38:54.3572|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:38:54.3572|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:38:54.4843|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:38:54.5319|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:54.5319|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:54.5319|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:54.5444|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:56.8755|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:38:56.9146|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:38:56.9211|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:38:56.9631|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:38:56.9686|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:38:57.0447|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:38:57.1017|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:38:57.1187|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:38:57.1327|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:38:57.1548|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:38:57.1688|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:57.1688|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:57.1978|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:38:57.2008|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:39:08.8353|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:39:08.8624|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:39:08.8624|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:39:08.9064|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:39:08.9064|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:39:09.0275|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:39:09.0640|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:39:09.0830|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:39:09.0900|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:39:09.1125|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:39:09.1285|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:39:09.2817|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:39:09.3922|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:39:09.3922|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:39:19.1723|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:39:19.1873|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 11:39:19.1873|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:39:19.2069|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 11:39:19.2069|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:39:19.2269|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 11:39:19.2629|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:39:19.2629|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:39:19.2784|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:39:19.2784|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 11:39:19.3049|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:39:19.3084|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:39:19.3084|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 11:39:19.3330|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:50:56.3024|ERROR|ASP.MetopeNspace.MvcApplication|Error caught in Application_Error event
, http://localhost:53133/SecurityAttributionHistory/Index 
 Error in: Object reference not set to an instance of an object., 
Stack Trace:   at MetopeMVCApp.DecimalModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) in c:\BlueStream\Development\Metope\WebSite\MetopeMVCApp\MetopeMVCApp\DecimalModelBinder.cs:line 19
   at System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor)
   at System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__19(AsyncCallback asyncCallback, Object asyncState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallBeginDelegate(AsyncCallback callback, Object callbackState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeAction(ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state)
   at System.Web.Mvc.Controller.<BeginExecuteCore>b__1c(AsyncCallback asyncCallback, Object asyncState, ExecuteCoreState innerState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncVoid`1.CallBeginDelegate(AsyncCallback callback, Object callbackState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state)
   at System.Web.Mvc.Controller.<BeginExecute>b__14(AsyncCallback asyncCallback, Object callbackState, Controller controller)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncVoid`1.CallBeginDelegate(AsyncCallback callback, Object callbackState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.MvcHandler.<BeginProcessRequest>b__4(AsyncCallback asyncCallback, Object asyncState, ProcessRequestState innerState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncVoid`1.CallBeginDelegate(AsyncCallback callback, Object callbackState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStepImpl(IExecutionStep step)
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
Session: Identity name:aaaaaa IsAuthenticated:True 
2018-04-17 17:51:09.2221|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: select cast(serverproperty('EngineEdition') as int)
2018-04-17 17:51:09.3047|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: select cast(serverproperty('EngineEdition') as int)
2018-04-17 17:51:10.0662|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:51:10.5000|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:51:11.1385|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:51:11.4852|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:51:11.7664|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:51:12.0421|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:51:12.0992|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: 
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.AspNetRoles','dbo.AspNetUserRoles','dbo.AspNetUsers','dbo.AspNetUserClaims','dbo.AspNetUserLogins')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-04-17 17:51:12.5675|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: 
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.AspNetRoles','dbo.AspNetUserRoles','dbo.AspNetUsers','dbo.AspNetUserClaims','dbo.AspNetUserLogins')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-04-17 17:51:13.3621|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-04-17 17:51:13.4211|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-04-17 17:51:13.5072|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (1) 
    [Project1].[C1] AS [C1], 
    [Project1].[MigrationId] AS [MigrationId], 
    [Project1].[Model] AS [Model], 
    [Project1].[ProductVersion] AS [ProductVersion]
    FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId], 
        [Extent1].[Model] AS [Model], 
        [Extent1].[ProductVersion] AS [ProductVersion], 
        1 AS [C1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [Project1]
    ORDER BY [Project1].[MigrationId] DESC
2018-04-17 17:51:13.5542|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (1) 
    [Project1].[C1] AS [C1], 
    [Project1].[MigrationId] AS [MigrationId], 
    [Project1].[Model] AS [Model], 
    [Project1].[ProductVersion] AS [ProductVersion]
    FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId], 
        [Extent1].[Model] AS [Model], 
        [Extent1].[ProductVersion] AS [ProductVersion], 
        1 AS [C1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [Project1]
    ORDER BY [Project1].[MigrationId] DESC
2018-04-17 17:51:14.0426|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[EntityIdScope] AS [EntityIdScope], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[EmailConfirmed] AS [EmailConfirmed], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[SecurityStamp] AS [SecurityStamp], 
    [Extent1].[PhoneNumber] AS [PhoneNumber], 
    [Extent1].[PhoneNumberConfirmed] AS [PhoneNumberConfirmed], 
    [Extent1].[TwoFactorEnabled] AS [TwoFactorEnabled], 
    [Extent1].[LockoutEndDateUtc] AS [LockoutEndDateUtc], 
    [Extent1].[LockoutEnabled] AS [LockoutEnabled], 
    [Extent1].[AccessFailedCount] AS [AccessFailedCount], 
    [Extent1].[UserName] AS [UserName]
    FROM [dbo].[AspNetUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @p0
2018-04-17 17:51:14.0756|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[EntityIdScope] AS [EntityIdScope], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[EmailConfirmed] AS [EmailConfirmed], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[SecurityStamp] AS [SecurityStamp], 
    [Extent1].[PhoneNumber] AS [PhoneNumber], 
    [Extent1].[PhoneNumberConfirmed] AS [PhoneNumberConfirmed], 
    [Extent1].[TwoFactorEnabled] AS [TwoFactorEnabled], 
    [Extent1].[LockoutEndDateUtc] AS [LockoutEndDateUtc], 
    [Extent1].[LockoutEnabled] AS [LockoutEnabled], 
    [Extent1].[AccessFailedCount] AS [AccessFailedCount], 
    [Extent1].[UserName] AS [UserName]
    FROM [dbo].[AspNetUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @p0
2018-04-17 17:51:14.2282|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[ClaimType] AS [ClaimType], 
    [Extent1].[ClaimValue] AS [ClaimValue]
    FROM [dbo].[AspNetUserClaims] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:14.2522|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[ClaimType] AS [ClaimType], 
    [Extent1].[ClaimValue] AS [ClaimValue]
    FROM [dbo].[AspNetUserClaims] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:14.3273|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[LoginProvider] AS [LoginProvider], 
    [Extent1].[ProviderKey] AS [ProviderKey], 
    [Extent1].[UserId] AS [UserId]
    FROM [dbo].[AspNetUserLogins] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:14.3463|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[LoginProvider] AS [LoginProvider], 
    [Extent1].[ProviderKey] AS [ProviderKey], 
    [Extent1].[UserId] AS [UserId]
    FROM [dbo].[AspNetUserLogins] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:14.4359|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[RoleId] AS [RoleId]
    FROM [dbo].[AspNetUserRoles] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:14.4524|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[RoleId] AS [RoleId]
    FROM [dbo].[AspNetUserRoles] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:14.4994|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:51:14.5785|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:51:14.6250|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[EntityIdScope] AS [EntityIdScope], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[EmailConfirmed] AS [EmailConfirmed], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[SecurityStamp] AS [SecurityStamp], 
    [Extent1].[PhoneNumber] AS [PhoneNumber], 
    [Extent1].[PhoneNumberConfirmed] AS [PhoneNumberConfirmed], 
    [Extent1].[TwoFactorEnabled] AS [TwoFactorEnabled], 
    [Extent1].[LockoutEndDateUtc] AS [LockoutEndDateUtc], 
    [Extent1].[LockoutEnabled] AS [LockoutEnabled], 
    [Extent1].[AccessFailedCount] AS [AccessFailedCount], 
    [Extent1].[UserName] AS [UserName]
    FROM [dbo].[AspNetUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @p0
2018-04-17 17:51:14.6395|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[EntityIdScope] AS [EntityIdScope], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[EmailConfirmed] AS [EmailConfirmed], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[SecurityStamp] AS [SecurityStamp], 
    [Extent1].[PhoneNumber] AS [PhoneNumber], 
    [Extent1].[PhoneNumberConfirmed] AS [PhoneNumberConfirmed], 
    [Extent1].[TwoFactorEnabled] AS [TwoFactorEnabled], 
    [Extent1].[LockoutEndDateUtc] AS [LockoutEndDateUtc], 
    [Extent1].[LockoutEnabled] AS [LockoutEnabled], 
    [Extent1].[AccessFailedCount] AS [AccessFailedCount], 
    [Extent1].[UserName] AS [UserName]
    FROM [dbo].[AspNetUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @p0
2018-04-17 17:51:14.6555|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[ClaimType] AS [ClaimType], 
    [Extent1].[ClaimValue] AS [ClaimValue]
    FROM [dbo].[AspNetUserClaims] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:14.6670|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[ClaimType] AS [ClaimType], 
    [Extent1].[ClaimValue] AS [ClaimValue]
    FROM [dbo].[AspNetUserClaims] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:14.6820|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[LoginProvider] AS [LoginProvider], 
    [Extent1].[ProviderKey] AS [ProviderKey], 
    [Extent1].[UserId] AS [UserId]
    FROM [dbo].[AspNetUserLogins] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:14.6820|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[LoginProvider] AS [LoginProvider], 
    [Extent1].[ProviderKey] AS [ProviderKey], 
    [Extent1].[UserId] AS [UserId]
    FROM [dbo].[AspNetUserLogins] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:14.7096|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[RoleId] AS [RoleId]
    FROM [dbo].[AspNetUserRoles] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:14.7211|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: True, Command Text: SELECT 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[RoleId] AS [RoleId]
    FROM [dbo].[AspNetUserRoles] AS [Extent1]
    WHERE [Extent1].[UserId] = @p__linq__0
2018-04-17 17:51:15.4181|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (2) 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Entity_Code] AS [Entity_Code], 
    [Extent1].[Entity_Name] AS [Entity_Name], 
    [Extent1].[Import_Folder] AS [Import_Folder], 
    [Extent1].[Export_Folder] AS [Export_Folder]
    FROM [dbo].[Entity] AS [Extent1]
    WHERE [Extent1].[Entity_ID] = @p0
2018-04-17 17:51:15.4836|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (2) 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Entity_Code] AS [Entity_Code], 
    [Extent1].[Entity_Name] AS [Entity_Name], 
    [Extent1].[Import_Folder] AS [Import_Folder], 
    [Extent1].[Export_Folder] AS [Export_Folder]
    FROM [dbo].[Entity] AS [Extent1]
    WHERE [Extent1].[Entity_ID] = @p0
2018-04-17 17:51:34.3577|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 17:51:34.4768|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 17:51:41.3756|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:51:41.4022|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:51:41.4287|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:51:41.4547|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:10.3806|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 17:52:10.4346|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 17:52:15.8936|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:16.1333|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:16.4290|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:16.7377|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:22.4089|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 17:52:22.5275|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 17:52:22.6236|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:22.7531|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:22.8532|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:22.8777|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:45.3701|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 17:52:45.4242|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 17:52:45.5202|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:45.5467|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:45.5833|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:52:45.6183|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:53:00.6288|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 17:53:00.6689|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
    [Project1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
    [Project1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
    [Project1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
    [Project1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
    [Project1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
    [Project1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
    [Project1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
    [Project1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
    [Project1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
    [Project1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
    [Project1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
    [Project1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
    [Project1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
    [Project1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
    [Project1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
    [Project1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
    [Project1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
    [Project1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
    [Project1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
    [Project1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
    [Project1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
    [Project1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
    [Project1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
    [Project1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
    [Project1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
    [Project1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
    [Project1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
    [Project1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
    [Project1].[Record_Date] AS [Record_Date], 
    [Project1].[Session_ID] AS [Session_ID], 
    [Project1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
    [Project1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
    [Project1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
    [Project1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
    [Project1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM ( SELECT 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Excess_Weight_Quarterly] AS [Excess_Weight_Quarterly], 
        [Extent1].[Relative_Contribution_Quarterly] AS [Relative_Contribution_Quarterly], 
        [Extent1].[Allocation_Selection_Interaction_Quarterly] AS [Allocation_Selection_Interaction_Quarterly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Quarterly] AS [StockVs_TotBenchmarkReturn_Quarterly], 
        [Extent1].[Selection_Interaction_Quarterly] AS [Selection_Interaction_Quarterly], 
        [Extent1].[Asset_Allocation_Quarterly] AS [Asset_Allocation_Quarterly], 
        [Extent1].[Excess_Weight_Monthly] AS [Excess_Weight_Monthly], 
        [Extent1].[Relative_Contribution_Monthly] AS [Relative_Contribution_Monthly], 
        [Extent1].[Allocation_Selection_Interaction_Monthly] AS [Allocation_Selection_Interaction_Monthly], 
        [Extent1].[StockVs_TotBenchmarkReturn_Monthly] AS [StockVs_TotBenchmarkReturn_Monthly], 
        [Extent1].[Selection_Interaction_Monthly] AS [Selection_Interaction_Monthly], 
        [Extent1].[Asset_Allocation_Monthly] AS [Asset_Allocation_Monthly], 
        [Extent1].[Excess_Weight_MonthToDate] AS [Excess_Weight_MonthToDate], 
        [Extent1].[Relative_Contribution_MonthToDate] AS [Relative_Contribution_MonthToDate], 
        [Extent1].[Allocation_Selection_Interaction_MonthToDate] AS [Allocation_Selection_Interaction_MonthToDate], 
        [Extent1].[StockVs_TotBenchmarkReturn_MonthToDate] AS [StockVs_TotBenchmarkReturn_MonthToDate], 
        [Extent1].[Selection_Interaction_MonthToDate] AS [Selection_Interaction_MonthToDate], 
        [Extent1].[Asset_Allocation_MonthToDate] AS [Asset_Allocation_MonthToDate], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Security_Weight_Portfolio_Monthly] AS [Security_Weight_Portfolio_Monthly], 
        [Extent1].[Security_Weight_Portfolio_MonthToDate] AS [Security_Weight_Portfolio_MonthToDate], 
        [Extent1].[Security_Weight_Portfolio_Quarterly] AS [Security_Weight_Portfolio_Quarterly], 
        [Extent1].[Security_Weight_Benchmark_Monthly] AS [Security_Weight_Benchmark_Monthly], 
        [Extent1].[Security_Weight_Benchmark_MonthToDate] AS [Security_Weight_Benchmark_MonthToDate], 
        [Extent1].[Security_Weight_Benchmark_Quarterly] AS [Security_Weight_Benchmark_Quarterly], 
        [Extent1].[Total_Return_Security_Price_Monthly] AS [Total_Return_Security_Price_Monthly], 
        [Extent1].[Total_Return_Security_Price_MonthToDate] AS [Total_Return_Security_Price_MonthToDate], 
        [Extent1].[Total_Return_Security_Price_Quarterly] AS [Total_Return_Security_Price_Quarterly], 
        [Extent1].[TW_Return_Portfolio_Monthly] AS [TW_Return_Portfolio_Monthly], 
        [Extent1].[TW_Return_Portfolio_MonthToDate] AS [TW_Return_Portfolio_MonthToDate], 
        [Extent1].[TW_Return_Portfolio_Quarterly] AS [TW_Return_Portfolio_Quarterly], 
        [Extent1].[Record_Date] AS [Record_Date], 
        [Extent1].[Session_ID] AS [Session_ID], 
        [Extent1].[Hist_Last_Update_Date] AS [Hist_Last_Update_Date], 
        [Extent1].[Hist_Last_Update_User] AS [Hist_Last_Update_User], 
        [Extent1].[Benchmark_Price_Performance_Monthly] AS [Benchmark_Price_Performance_Monthly], 
        [Extent1].[Benchmark_Price_Performance_MonthToDate] AS [Benchmark_Price_Performance_MonthToDate], 
        [Extent1].[Benchmark_Price_Performance_Quarterly] AS [Benchmark_Price_Performance_Quarterly], 
        [Extent2].[Security_ID] AS [Security_ID1], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
        FROM  [dbo].[Security_Attribution_History] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Security_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Record_Date] DESC
2018-04-17 17:53:00.7629|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:53:00.8065|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:53:00.8470|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:53:00.8705|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:58:13.6932|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:58:13.8638|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:58:14.2997|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 17:58:14.3377|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 17:58:14.4377|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 17:58:14.4703|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 17:58:15.2036|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 17:58:15.2911|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 17:58:19.9504|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:58:19.9779|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:58:20.0099|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:58:20.0365|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:58:20.1140|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:58:20.1290|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:58:20.1601|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:58:20.1831|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:58:33.0083|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 17:58:33.0793|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 17:58:33.1339|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 17:58:33.1834|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 17:58:33.2244|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 17:58:33.2660|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 17:58:36.9891|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:58:37.0061|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:58:37.0307|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:58:37.0497|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:58:37.0792|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:58:37.0962|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:58:37.1212|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:58:37.1377|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:58:58.7784|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 17:58:58.8400|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    CASE WHEN ( EXISTS (SELECT TOP (50) 
        1 AS [C1]
        FROM ( SELECT 
            [Extent1].[Transaction_Date] AS [Transaction_Date]
            FROM [dbo].[Cash_Transactions] AS [Extent1]
            WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
        )  AS [Project1]
        ORDER BY [Project1].[Transaction_Date] DESC
    )) THEN cast(1 as bit) ELSE cast(0 as bit) END AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
2018-04-17 17:58:58.8915|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 17:58:58.9355|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        MIN([Limit1].[Transaction_Date]) AS [A1]
        FROM ( SELECT TOP (50) [Project1].[Transaction_Date] AS [Transaction_Date]
            FROM ( SELECT 
                [Extent1].[Transaction_Date] AS [Transaction_Date]
                FROM [dbo].[Cash_Transactions] AS [Extent1]
                WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
            )  AS [Project1]
            ORDER BY [Project1].[Transaction_Date] DESC
        )  AS [Limit1]
    )  AS [GroupBy1]
2018-04-17 17:58:58.9606|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 17:58:59.0761|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT TOP (50) 
    [Project1].[C1] AS [C1], 
    [Project1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
    [Project1].[Cash_Security_ID] AS [Cash_Security_ID], 
    [Project1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
    [Project1].[Order_ID] AS [Order_ID], 
    [Project1].[Allocation_ID] AS [Allocation_ID], 
    [Project1].[Cashflow_ID] AS [Cashflow_ID], 
    [Project1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
    [Project1].[External_ID] AS [External_ID], 
    [Project1].[Transaction_Date] AS [Transaction_Date], 
    [Project1].[Value_Date] AS [Value_Date], 
    [Project1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
    [Project1].[Transaction_Amount] AS [Transaction_Amount], 
    [Project1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
    [Project1].[BaseCur_Amount] AS [BaseCur_Amount], 
    [Project1].[Create_User_Code] AS [Create_User_Code], 
    [Project1].[Create_Date] AS [Create_Date], 
    [Project1].[Last_Update_User] AS [Last_Update_User], 
    [Project1].[Last_Update_Date] AS [Last_Update_Date], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Entity_ID1] AS [Entity_ID1], 
    [Project1].[Security_Name] AS [Security_Name], 
    [Project1].[Short_Name] AS [Short_Name], 
    [Project1].[Primary_Exch] AS [Primary_Exch], 
    [Project1].[Secondary_Exch] AS [Secondary_Exch], 
    [Project1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Project1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Project1].[Security_Type_Code] AS [Security_Type_Code], 
    [Project1].[Price_Multiplier] AS [Price_Multiplier], 
    [Project1].[Income_Frequency] AS [Income_Frequency], 
    [Project1].[Issuer_Code] AS [Issuer_Code], 
    [Project1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Project1].[Asset_Currency] AS [Asset_Currency], 
    [Project1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Project1].[Decimal_Precision] AS [Decimal_Precision], 
    [Project1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Project1].[Issue_Date] AS [Issue_Date], 
    [Project1].[Maturity_Date] AS [Maturity_Date], 
    [Project1].[Coupon_Rate] AS [Coupon_Rate], 
    [Project1].[Price_Exchange] AS [Price_Exchange], 
    [Project1].[Trade_Currency] AS [Trade_Currency], 
    [Project1].[Price_Curr] AS [Price_Curr], 
    [Project1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Project1].[Share_Class] AS [Share_Class], 
    [Project1].[Current_Market_Price] AS [Current_Market_Price], 
    [Project1].[Index_Type] AS [Index_Type], 
    [Project1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Project1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Project1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Project1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Project1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Project1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Project1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Project1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Project1].[Payment_Frequency] AS [Payment_Frequency], 
    [Project1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Project1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Project1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Project1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Project1].[Ticker] AS [Ticker], 
    [Project1].[Inet_ID] AS [Inet_ID], 
    [Project1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Project1].[External_Sec_ID] AS [External_Sec_ID], 
    [Project1].[Reuters_ID] AS [Reuters_ID], 
    [Project1].[ISIN] AS [ISIN], 
    [Project1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Project1].[System_Locked] AS [System_Locked], 
    [Project1].[Last_Update_User1] AS [Last_Update_User1], 
    [Project1].[Last_Update_Date1] AS [Last_Update_Date1], 
    [Project1].[Security_Status] AS [Security_Status], 
    [Project1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Project1].[Active_flag] AS [Active_flag], 
    [Project1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
    [Project1].[Order_ID1] AS [Order_ID1], 
    [Project1].[Entity_ID2] AS [Entity_ID2], 
    [Project1].[Security_ID1] AS [Security_ID1], 
    [Project1].[Trade_Date] AS [Trade_Date], 
    [Project1].[Settlement_Date] AS [Settlement_Date], 
    [Project1].[Transaction_Type] AS [Transaction_Type], 
    [Project1].[Order_Status] AS [Order_Status], 
    [Project1].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
    [Project1].[Manager] AS [Manager], 
    [Project1].[Trader] AS [Trader], 
    [Project1].[Operations_User] AS [Operations_User], 
    [Project1].[Order_Instruction] AS [Order_Instruction], 
    [Project1].[Order_Duration] AS [Order_Duration], 
    [Project1].[Limit_Price] AS [Limit_Price], 
    [Project1].[Limit_Yield] AS [Limit_Yield], 
    [Project1].[Limit_Discount] AS [Limit_Discount], 
    [Project1].[Order_Creator] AS [Order_Creator], 
    [Project1].[Order_Create_Date] AS [Order_Create_Date], 
    [Project1].[Last_Update_Date2] AS [Last_Update_Date2], 
    [Project1].[Last_Update_User2] AS [Last_Update_User2], 
    [Project1].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
    [Project1].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
    [Project1].[Value_Based_Indicator] AS [Value_Based_Indicator], 
    [Project1].[Target_Clean_Price] AS [Target_Clean_Price], 
    [Project1].[Target_Income_Price] AS [Target_Income_Price], 
    [Project1].[Target_AllIn_Price] AS [Target_AllIn_Price], 
    [Project1].[Target_Yield] AS [Target_Yield], 
    [Project1].[Target_Discount] AS [Target_Discount], 
    [Project1].[Target_Quantity] AS [Target_Quantity], 
    [Project1].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
    [Project1].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
    [Project1].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
    [Project1].[Place_Quantity] AS [Place_Quantity], 
    [Project1].[Execution_Quantity] AS [Execution_Quantity], 
    [Project1].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
    [Project1].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
    [Project1].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
    [Project1].[Broker_Code] AS [Broker_Code], 
    [Project1].[Execution_Clean_Price] AS [Execution_Clean_Price], 
    [Project1].[Execution_Income_Price] AS [Execution_Income_Price], 
    [Project1].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
    [Project1].[Execution_Yield] AS [Execution_Yield], 
    [Project1].[Execution_Discount] AS [Execution_Discount], 
    [Project1].[Execution_Currency] AS [Execution_Currency], 
    [Project1].[Execution_Exchange] AS [Execution_Exchange], 
    [Project1].[Target_FX_Rate] AS [Target_FX_Rate], 
    [Project1].[Limit_FX_Rate] AS [Limit_FX_Rate], 
    [Project1].[Execution_FX_Rate] AS [Execution_FX_Rate], 
    [Project1].[Buy_Currency_Code] AS [Buy_Currency_Code], 
    [Project1].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
    [Project1].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
    [Project1].[Sell_Currency_Code] AS [Sell_Currency_Code], 
    [Project1].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
    [Project1].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
    [Project1].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
    [Project1].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
    [Project1].[Commission_Rate] AS [Commission_Rate], 
    [Project1].[Commission_Type] AS [Commission_Type], 
    [Project1].[Fee_Code1] AS [Fee_Code1], 
    [Project1].[Fee_Code2] AS [Fee_Code2], 
    [Project1].[Fee_Code3] AS [Fee_Code3], 
    [Project1].[Fee_Code4] AS [Fee_Code4], 
    [Project1].[Fee_Code5] AS [Fee_Code5], 
    [Project1].[Fee_Code6] AS [Fee_Code6], 
    [Project1].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
    [Project1].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
    [Project1].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
    [Project1].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
    [Project1].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
    [Project1].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
    [Project1].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
    [Project1].[Tax_Type] AS [Tax_Type], 
    [Project1].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
    [Project1].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
    [Project1].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
    [Project1].[Related_Order_ID] AS [Related_Order_ID], 
    [Project1].[Previous_Order_ID] AS [Previous_Order_ID], 
    [Project1].[Authorised_User1] AS [Authorised_User1], 
    [Project1].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
    [Project1].[Authorised_User2] AS [Authorised_User2], 
    [Project1].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
    [Project1].[Authorised_Number] AS [Authorised_Number], 
    [Project1].[Security_Type_Code1] AS [Security_Type_Code1], 
    [Project1].[Export_Status] AS [Export_Status], 
    [Project1].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
    [Project1].[Operations_Status] AS [Operations_Status], 
    [Project1].[Import_Trade_ID] AS [Import_Trade_ID]
    FROM ( SELECT 
        [Extent1].[Cash_Transaction_ID] AS [Cash_Transaction_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Transaction_Security_ID] AS [Transaction_Security_ID], 
        [Extent1].[Cash_Security_ID] AS [Cash_Security_ID], 
        [Extent1].[Transaction_Source_Code] AS [Transaction_Source_Code], 
        [Extent1].[Order_ID] AS [Order_ID], 
        [Extent1].[Allocation_ID] AS [Allocation_ID], 
        [Extent1].[Cashflow_ID] AS [Cashflow_ID], 
        [Extent1].[Dividend_Seq_Number] AS [Dividend_Seq_Number], 
        [Extent1].[External_ID] AS [External_ID], 
        [Extent1].[Transaction_Date] AS [Transaction_Date], 
        [Extent1].[Value_Date] AS [Value_Date], 
        [Extent1].[Cash_Transaction_Type] AS [Cash_Transaction_Type], 
        [Extent1].[Transaction_Amount] AS [Transaction_Amount], 
        [Extent1].[Transaction_Currency_Code] AS [Transaction_Currency_Code], 
        [Extent1].[BaseCur_Amount] AS [BaseCur_Amount], 
        [Extent1].[Create_User_Code] AS [Create_User_Code], 
        [Extent1].[Create_Date] AS [Create_Date], 
        [Extent1].[Last_Update_User] AS [Last_Update_User], 
        [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
        [Extent2].[Security_ID] AS [Security_ID], 
        [Extent2].[Entity_ID] AS [Entity_ID1], 
        [Extent2].[Security_Name] AS [Security_Name], 
        [Extent2].[Short_Name] AS [Short_Name], 
        [Extent2].[Primary_Exch] AS [Primary_Exch], 
        [Extent2].[Secondary_Exch] AS [Secondary_Exch], 
        [Extent2].[Country_Of_Domicile] AS [Country_Of_Domicile], 
        [Extent2].[Country_Of_Risk] AS [Country_Of_Risk], 
        [Extent2].[Security_Type_Code] AS [Security_Type_Code], 
        [Extent2].[Price_Multiplier] AS [Price_Multiplier], 
        [Extent2].[Income_Frequency] AS [Income_Frequency], 
        [Extent2].[Issuer_Code] AS [Issuer_Code], 
        [Extent2].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
        [Extent2].[Asset_Currency] AS [Asset_Currency], 
        [Extent2].[Min_Lot_Size] AS [Min_Lot_Size], 
        [Extent2].[Decimal_Precision] AS [Decimal_Precision], 
        [Extent2].[AvePrice_Rounding] AS [AvePrice_Rounding], 
        [Extent2].[Issue_Date] AS [Issue_Date], 
        [Extent2].[Maturity_Date] AS [Maturity_Date], 
        [Extent2].[Coupon_Rate] AS [Coupon_Rate], 
        [Extent2].[Price_Exchange] AS [Price_Exchange], 
        [Extent2].[Trade_Currency] AS [Trade_Currency], 
        [Extent2].[Price_Curr] AS [Price_Curr], 
        [Extent2].[Currency_Pair_Code] AS [Currency_Pair_Code], 
        [Extent2].[Share_Class] AS [Share_Class], 
        [Extent2].[Current_Market_Price] AS [Current_Market_Price], 
        [Extent2].[Index_Type] AS [Index_Type], 
        [Extent2].[Clean_Price_Formula] AS [Clean_Price_Formula], 
        [Extent2].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
        [Extent2].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
        [Extent2].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
        [Extent2].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
        [Extent2].[Track_EOM_Flag] AS [Track_EOM_Flag], 
        [Extent2].[Next_Coupon_Date] AS [Next_Coupon_Date], 
        [Extent2].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
        [Extent2].[Payment_Frequency] AS [Payment_Frequency], 
        [Extent2].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
        [Extent2].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
        [Extent2].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
        [Extent2].[Ex_Div_Period] AS [Ex_Div_Period], 
        [Extent2].[Ticker] AS [Ticker], 
        [Extent2].[Inet_ID] AS [Inet_ID], 
        [Extent2].[Bloomberg_ID] AS [Bloomberg_ID], 
        [Extent2].[External_Sec_ID] AS [External_Sec_ID], 
        [Extent2].[Reuters_ID] AS [Reuters_ID], 
        [Extent2].[ISIN] AS [ISIN], 
        [Extent2].[Call_Account_Flag] AS [Call_Account_Flag], 
        [Extent2].[System_Locked] AS [System_Locked], 
        [Extent2].[Last_Update_User] AS [Last_Update_User1], 
        [Extent2].[Last_Update_Date] AS [Last_Update_Date1], 
        [Extent2].[Security_Status] AS [Security_Status], 
        [Extent2].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
        [Extent2].[Active_flag] AS [Active_flag], 
        [Extent2].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID], 
        [Extent3].[Order_ID] AS [Order_ID1], 
        [Extent3].[Entity_ID] AS [Entity_ID2], 
        [Extent3].[Security_ID] AS [Security_ID1], 
        [Extent3].[Trade_Date] AS [Trade_Date], 
        [Extent3].[Settlement_Date] AS [Settlement_Date], 
        [Extent3].[Transaction_Type] AS [Transaction_Type], 
        [Extent3].[Order_Status] AS [Order_Status], 
        [Extent3].[Cancel_Reason_Code] AS [Cancel_Reason_Code], 
        [Extent3].[Manager] AS [Manager], 
        [Extent3].[Trader] AS [Trader], 
        [Extent3].[Operations_User] AS [Operations_User], 
        [Extent3].[Order_Instruction] AS [Order_Instruction], 
        [Extent3].[Order_Duration] AS [Order_Duration], 
        [Extent3].[Limit_Price] AS [Limit_Price], 
        [Extent3].[Limit_Yield] AS [Limit_Yield], 
        [Extent3].[Limit_Discount] AS [Limit_Discount], 
        [Extent3].[Order_Creator] AS [Order_Creator], 
        [Extent3].[Order_Create_Date] AS [Order_Create_Date], 
        [Extent3].[Last_Update_Date] AS [Last_Update_Date2], 
        [Extent3].[Last_Update_User] AS [Last_Update_User2], 
        [Extent3].[Sent_To_Trading_Date] AS [Sent_To_Trading_Date], 
        [Extent3].[Sent_To_Accounting_Date] AS [Sent_To_Accounting_Date], 
        [Extent3].[Value_Based_Indicator] AS [Value_Based_Indicator], 
        [Extent3].[Target_Clean_Price] AS [Target_Clean_Price], 
        [Extent3].[Target_Income_Price] AS [Target_Income_Price], 
        [Extent3].[Target_AllIn_Price] AS [Target_AllIn_Price], 
        [Extent3].[Target_Yield] AS [Target_Yield], 
        [Extent3].[Target_Discount] AS [Target_Discount], 
        [Extent3].[Target_Quantity] AS [Target_Quantity], 
        [Extent3].[Target_Clean_Amount_TradeCur] AS [Target_Clean_Amount_TradeCur], 
        [Extent3].[Target_Income_Amount_TradeCur] AS [Target_Income_Amount_TradeCur], 
        [Extent3].[Target_AllIn_Amount_TradeCur] AS [Target_AllIn_Amount_TradeCur], 
        [Extent3].[Place_Quantity] AS [Place_Quantity], 
        [Extent3].[Execution_Quantity] AS [Execution_Quantity], 
        [Extent3].[Execution_Clean_Amount_TradeCur] AS [Execution_Clean_Amount_TradeCur], 
        [Extent3].[Execution_Income_Amount_TradeCur] AS [Execution_Income_Amount_TradeCur], 
        [Extent3].[Execution_AllIn_Amount_TradeCur] AS [Execution_AllIn_Amount_TradeCur], 
        [Extent3].[Broker_Code] AS [Broker_Code], 
        [Extent3].[Execution_Clean_Price] AS [Execution_Clean_Price], 
        [Extent3].[Execution_Income_Price] AS [Execution_Income_Price], 
        [Extent3].[Execution_AllIn_Price] AS [Execution_AllIn_Price], 
        [Extent3].[Execution_Yield] AS [Execution_Yield], 
        [Extent3].[Execution_Discount] AS [Execution_Discount], 
        [Extent3].[Execution_Currency] AS [Execution_Currency], 
        [Extent3].[Execution_Exchange] AS [Execution_Exchange], 
        [Extent3].[Target_FX_Rate] AS [Target_FX_Rate], 
        [Extent3].[Limit_FX_Rate] AS [Limit_FX_Rate], 
        [Extent3].[Execution_FX_Rate] AS [Execution_FX_Rate], 
        [Extent3].[Buy_Currency_Code] AS [Buy_Currency_Code], 
        [Extent3].[Buy_Currency_Execution_Amount] AS [Buy_Currency_Execution_Amount], 
        [Extent3].[Buy_Currency_Target_Amount] AS [Buy_Currency_Target_Amount], 
        [Extent3].[Sell_Currency_Code] AS [Sell_Currency_Code], 
        [Extent3].[Sell_Currency_Execution_Amount] AS [Sell_Currency_Execution_Amount], 
        [Extent3].[Sell_Currency_Target_Amount] AS [Sell_Currency_Target_Amount], 
        [Extent3].[Commission_Amount_TradeCur] AS [Commission_Amount_TradeCur], 
        [Extent3].[Trade_Type_Indicator] AS [Trade_Type_Indicator], 
        [Extent3].[Commission_Rate] AS [Commission_Rate], 
        [Extent3].[Commission_Type] AS [Commission_Type], 
        [Extent3].[Fee_Code1] AS [Fee_Code1], 
        [Extent3].[Fee_Code2] AS [Fee_Code2], 
        [Extent3].[Fee_Code3] AS [Fee_Code3], 
        [Extent3].[Fee_Code4] AS [Fee_Code4], 
        [Extent3].[Fee_Code5] AS [Fee_Code5], 
        [Extent3].[Fee_Code6] AS [Fee_Code6], 
        [Extent3].[Fee_Amount1_TradeCur] AS [Fee_Amount1_TradeCur], 
        [Extent3].[Fee_Amount2_TradeCur] AS [Fee_Amount2_TradeCur], 
        [Extent3].[Fee_Amount3_TradeCur] AS [Fee_Amount3_TradeCur], 
        [Extent3].[Fee_Amount4_TradeCur] AS [Fee_Amount4_TradeCur], 
        [Extent3].[Fee_Amount5_TradeCur] AS [Fee_Amount5_TradeCur], 
        [Extent3].[Fee_Amount6_TradeCur] AS [Fee_Amount6_TradeCur], 
        [Extent3].[Tax_Amount_TradeCur] AS [Tax_Amount_TradeCur], 
        [Extent3].[Tax_Type] AS [Tax_Type], 
        [Extent3].[Tax_Charge_FeeNum] AS [Tax_Charge_FeeNum], 
        [Extent3].[Execution_Gross_Amount_TradeCur] AS [Execution_Gross_Amount_TradeCur], 
        [Extent3].[Execution_Net_Amount_TradeCur] AS [Execution_Net_Amount_TradeCur], 
        [Extent3].[Related_Order_ID] AS [Related_Order_ID], 
        [Extent3].[Previous_Order_ID] AS [Previous_Order_ID], 
        [Extent3].[Authorised_User1] AS [Authorised_User1], 
        [Extent3].[Authorised_User1_DateTime] AS [Authorised_User1_DateTime], 
        [Extent3].[Authorised_User2] AS [Authorised_User2], 
        [Extent3].[Authorised_User2_DateTime] AS [Authorised_User2_DateTime], 
        [Extent3].[Authorised_Number] AS [Authorised_Number], 
        [Extent3].[Security_Type_Code] AS [Security_Type_Code1], 
        [Extent3].[Export_Status] AS [Export_Status], 
        [Extent3].[Order_Ack_Nack_Status] AS [Order_Ack_Nack_Status], 
        [Extent3].[Operations_Status] AS [Operations_Status], 
        [Extent3].[Import_Trade_ID] AS [Import_Trade_ID], 
        1 AS [C1]
        FROM   [dbo].[Cash_Transactions] AS [Extent1]
        LEFT OUTER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Transaction_Security_ID] = [Extent2].[Security_ID]
        LEFT OUTER JOIN [dbo].[Order_Detail] AS [Extent3] ON [Extent1].[Order_ID] = [Extent3].[Order_ID]
        WHERE ([Extent1].[Entity_ID] = @p__linq__0) AND ([Extent1].[Portfolio_Code] = @p__linq__1) AND ([Extent1].[Transaction_Date] <= @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Transaction_Date] DESC
2018-04-17 17:59:03.0316|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:59:03.0586|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:59:03.0877|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:59:03.1117|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Extent1].[Security_ID] AS [Security_ID], 
    [Extent1].[Entity_ID] AS [Entity_ID], 
    [Extent1].[Security_Name] AS [Security_Name], 
    [Extent1].[Short_Name] AS [Short_Name], 
    [Extent1].[Primary_Exch] AS [Primary_Exch], 
    [Extent1].[Secondary_Exch] AS [Secondary_Exch], 
    [Extent1].[Country_Of_Domicile] AS [Country_Of_Domicile], 
    [Extent1].[Country_Of_Risk] AS [Country_Of_Risk], 
    [Extent1].[Security_Type_Code] AS [Security_Type_Code], 
    [Extent1].[Price_Multiplier] AS [Price_Multiplier], 
    [Extent1].[Income_Frequency] AS [Income_Frequency], 
    [Extent1].[Issuer_Code] AS [Issuer_Code], 
    [Extent1].[Ultimate_Issuer_Code] AS [Ultimate_Issuer_Code], 
    [Extent1].[Asset_Currency] AS [Asset_Currency], 
    [Extent1].[Min_Lot_Size] AS [Min_Lot_Size], 
    [Extent1].[Decimal_Precision] AS [Decimal_Precision], 
    [Extent1].[AvePrice_Rounding] AS [AvePrice_Rounding], 
    [Extent1].[Issue_Date] AS [Issue_Date], 
    [Extent1].[Maturity_Date] AS [Maturity_Date], 
    [Extent1].[Coupon_Rate] AS [Coupon_Rate], 
    [Extent1].[Price_Exchange] AS [Price_Exchange], 
    [Extent1].[Trade_Currency] AS [Trade_Currency], 
    [Extent1].[Price_Curr] AS [Price_Curr], 
    [Extent1].[Currency_Pair_Code] AS [Currency_Pair_Code], 
    [Extent1].[Share_Class] AS [Share_Class], 
    [Extent1].[Current_Market_Price] AS [Current_Market_Price], 
    [Extent1].[Index_Type] AS [Index_Type], 
    [Extent1].[Clean_Price_Formula] AS [Clean_Price_Formula], 
    [Extent1].[Accrued_Income_Price_Formula] AS [Accrued_Income_Price_Formula], 
    [Extent1].[Odd_First_Coupon_Date] AS [Odd_First_Coupon_Date], 
    [Extent1].[Odd_Last_Coupon_Date] AS [Odd_Last_Coupon_Date], 
    [Extent1].[Coupon_Anniversary_Indicator] AS [Coupon_Anniversary_Indicator], 
    [Extent1].[Track_EOM_Flag] AS [Track_EOM_Flag], 
    [Extent1].[Next_Coupon_Date] AS [Next_Coupon_Date], 
    [Extent1].[Previous_Coupon_Date] AS [Previous_Coupon_Date], 
    [Extent1].[Payment_Frequency] AS [Payment_Frequency], 
    [Extent1].[Coupon_BusDay_Adjustment] AS [Coupon_BusDay_Adjustment], 
    [Extent1].[Next_Ex_Div_Date] AS [Next_Ex_Div_Date], 
    [Extent1].[Ex_Div_BusDay_Adjustment] AS [Ex_Div_BusDay_Adjustment], 
    [Extent1].[Ex_Div_Period] AS [Ex_Div_Period], 
    [Extent1].[Ticker] AS [Ticker], 
    [Extent1].[Inet_ID] AS [Inet_ID], 
    [Extent1].[Bloomberg_ID] AS [Bloomberg_ID], 
    [Extent1].[External_Sec_ID] AS [External_Sec_ID], 
    [Extent1].[Reuters_ID] AS [Reuters_ID], 
    [Extent1].[ISIN] AS [ISIN], 
    [Extent1].[Call_Account_Flag] AS [Call_Account_Flag], 
    [Extent1].[System_Locked] AS [System_Locked], 
    [Extent1].[Last_Update_User] AS [Last_Update_User], 
    [Extent1].[Last_Update_Date] AS [Last_Update_Date], 
    [Extent1].[Security_Status] AS [Security_Status], 
    [Extent1].[Benchmark_Portfolio] AS [Benchmark_Portfolio], 
    [Extent1].[Active_flag] AS [Active_flag], 
    [Extent1].[Dividend_FX_Security_ID] AS [Dividend_FX_Security_ID]
    FROM [dbo].[Security_Detail] AS [Extent1]
    WHERE [Extent1].[Security_ID] = @EntityKeyValue1
2018-04-17 17:59:03.1537|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:59:03.2538|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:59:03.3253|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 17:59:03.3383|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:13.7024|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:14.0967|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:14.5495|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[C1] AS [C1], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Position_Date] AS [Position_Date], 
    [Project1].[Dealt_Quantity] AS [Dealt_Quantity], 
    [Project1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
    [Project1].[Ticker] AS [Ticker]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
        [Extent1].[Position_Date] AS [Position_Date], 
        [Extent1].[Dealt_Quantity] AS [Dealt_Quantity], 
        [Extent1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
        [Extent2].[Ticker] AS [Ticker], 
        1 AS [C1]
        FROM  [dbo].[Position_SOD] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Portfolio_Code] = @p__linq__0) AND ([Extent1].[Entity_ID] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Position_Date] DESC, [Project1].[Ticker] ASC
2018-04-17 18:03:14.5946|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[C1] AS [C1], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Position_Date] AS [Position_Date], 
    [Project1].[Dealt_Quantity] AS [Dealt_Quantity], 
    [Project1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
    [Project1].[Ticker] AS [Ticker]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
        [Extent1].[Position_Date] AS [Position_Date], 
        [Extent1].[Dealt_Quantity] AS [Dealt_Quantity], 
        [Extent1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
        [Extent2].[Ticker] AS [Ticker], 
        1 AS [C1]
        FROM  [dbo].[Position_SOD] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Portfolio_Code] = @p__linq__0) AND ([Extent1].[Entity_ID] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Position_Date] DESC, [Project1].[Ticker] ASC
2018-04-17 18:03:17.9243|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:17.9608|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:17.9908|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:17.9998|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:40.6007|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[C1] AS [C1], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Position_Date] AS [Position_Date], 
    [Project1].[Dealt_Quantity] AS [Dealt_Quantity], 
    [Project1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
    [Project1].[Ticker] AS [Ticker]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
        [Extent1].[Position_Date] AS [Position_Date], 
        [Extent1].[Dealt_Quantity] AS [Dealt_Quantity], 
        [Extent1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
        [Extent2].[Ticker] AS [Ticker], 
        1 AS [C1]
        FROM  [dbo].[Position_SOD] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Portfolio_Code] = @p__linq__0) AND ([Extent1].[Entity_ID] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Position_Date] DESC, [Project1].[Ticker] ASC
2018-04-17 18:03:40.6773|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[C1] AS [C1], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Position_Date] AS [Position_Date], 
    [Project1].[Dealt_Quantity] AS [Dealt_Quantity], 
    [Project1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
    [Project1].[Ticker] AS [Ticker]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
        [Extent1].[Position_Date] AS [Position_Date], 
        [Extent1].[Dealt_Quantity] AS [Dealt_Quantity], 
        [Extent1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
        [Extent2].[Ticker] AS [Ticker], 
        1 AS [C1]
        FROM  [dbo].[Position_SOD] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Portfolio_Code] = @p__linq__0) AND ([Extent1].[Entity_ID] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Position_Date] DESC, [Project1].[Ticker] ASC
2018-04-17 18:03:46.6829|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:46.6829|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:46.7059|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:46.7195|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:53.1725|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[C1] AS [C1], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Position_Date] AS [Position_Date], 
    [Project1].[Dealt_Quantity] AS [Dealt_Quantity], 
    [Project1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
    [Project1].[Ticker] AS [Ticker]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
        [Extent1].[Position_Date] AS [Position_Date], 
        [Extent1].[Dealt_Quantity] AS [Dealt_Quantity], 
        [Extent1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
        [Extent2].[Ticker] AS [Ticker], 
        1 AS [C1]
        FROM  [dbo].[Position_SOD] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Portfolio_Code] = @p__linq__0) AND ([Extent1].[Entity_ID] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Position_Date] DESC, [Project1].[Ticker] ASC
2018-04-17 18:03:53.2546|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[C1] AS [C1], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Position_Date] AS [Position_Date], 
    [Project1].[Dealt_Quantity] AS [Dealt_Quantity], 
    [Project1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
    [Project1].[Ticker] AS [Ticker]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
        [Extent1].[Position_Date] AS [Position_Date], 
        [Extent1].[Dealt_Quantity] AS [Dealt_Quantity], 
        [Extent1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
        [Extent2].[Ticker] AS [Ticker], 
        1 AS [C1]
        FROM  [dbo].[Position_SOD] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Portfolio_Code] = @p__linq__0) AND ([Extent1].[Entity_ID] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[Position_Date] DESC, [Project1].[Ticker] ASC
2018-04-17 18:03:53.4397|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:53.4652|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:53.4913|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:03:53.5198|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:04:00.3938|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[C1] AS [C1], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Position_Date] AS [Position_Date], 
    [Project1].[Dealt_Quantity] AS [Dealt_Quantity], 
    [Project1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
    [Project1].[Ticker] AS [Ticker]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
        [Extent1].[Position_Date] AS [Position_Date], 
        [Extent1].[Dealt_Quantity] AS [Dealt_Quantity], 
        [Extent1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
        [Extent2].[Ticker] AS [Ticker], 
        1 AS [C1]
        FROM  [dbo].[Position_SOD] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Portfolio_Code] = @p__linq__0) AND ([Extent1].[Entity_ID] = @p__linq__1) AND ([Extent1].[Position_Date] = @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Position_Date] DESC, [Project1].[Ticker] ASC
2018-04-17 18:04:00.4964|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[C1] AS [C1], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Position_Date] AS [Position_Date], 
    [Project1].[Dealt_Quantity] AS [Dealt_Quantity], 
    [Project1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
    [Project1].[Ticker] AS [Ticker]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
        [Extent1].[Position_Date] AS [Position_Date], 
        [Extent1].[Dealt_Quantity] AS [Dealt_Quantity], 
        [Extent1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
        [Extent2].[Ticker] AS [Ticker], 
        1 AS [C1]
        FROM  [dbo].[Position_SOD] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Portfolio_Code] = @p__linq__0) AND ([Extent1].[Entity_ID] = @p__linq__1) AND ([Extent1].[Position_Date] = @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Position_Date] DESC, [Project1].[Ticker] ASC
2018-04-17 18:04:00.5659|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:04:00.5924|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:04:00.6265|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:04:00.6565|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:04:13.0715|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[C1] AS [C1], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Position_Date] AS [Position_Date], 
    [Project1].[Dealt_Quantity] AS [Dealt_Quantity], 
    [Project1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
    [Project1].[Ticker] AS [Ticker]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
        [Extent1].[Position_Date] AS [Position_Date], 
        [Extent1].[Dealt_Quantity] AS [Dealt_Quantity], 
        [Extent1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
        [Extent2].[Ticker] AS [Ticker], 
        1 AS [C1]
        FROM  [dbo].[Position_SOD] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Portfolio_Code] = @p__linq__0) AND ([Extent1].[Entity_ID] = @p__linq__1) AND ([Extent1].[Position_Date] = @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Position_Date] DESC, [Project1].[Ticker] ASC
2018-04-17 18:04:13.1401|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: SELECT 
    [Project1].[C1] AS [C1], 
    [Project1].[Entity_ID] AS [Entity_ID], 
    [Project1].[Security_ID] AS [Security_ID], 
    [Project1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
    [Project1].[Portfolio_Code] AS [Portfolio_Code], 
    [Project1].[Position_Date] AS [Position_Date], 
    [Project1].[Dealt_Quantity] AS [Dealt_Quantity], 
    [Project1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
    [Project1].[Ticker] AS [Ticker]
    FROM ( SELECT 
        [Extent1].[Entity_ID] AS [Entity_ID], 
        [Extent1].[Portfolio_Code] AS [Portfolio_Code], 
        [Extent1].[Security_ID] AS [Security_ID], 
        [Extent1].[Long_Short_Indicator] AS [Long_Short_Indicator], 
        [Extent1].[Position_Date] AS [Position_Date], 
        [Extent1].[Dealt_Quantity] AS [Dealt_Quantity], 
        [Extent1].[Dealt_AllIn_Mkt_Value_BaseCur] AS [Dealt_AllIn_Mkt_Value_BaseCur], 
        [Extent2].[Ticker] AS [Ticker], 
        1 AS [C1]
        FROM  [dbo].[Position_SOD] AS [Extent1]
        INNER JOIN [dbo].[Security_Detail] AS [Extent2] ON [Extent1].[Security_ID] = [Extent2].[Security_ID]
        WHERE ([Extent1].[Portfolio_Code] = @p__linq__0) AND ([Extent1].[Entity_ID] = @p__linq__1) AND ([Extent1].[Position_Date] = @p__linq__2)
    )  AS [Project1]
    ORDER BY [Project1].[Position_Date] DESC, [Project1].[Ticker] ASC
2018-04-17 18:04:13.2466|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:04:13.2837|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:04:13.3182|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
2018-04-17 18:04:13.3487|INFO|MetopeMVCApp.Filters.DbInterceptors.NLogCommandInterceptor| IsAsync: False, Command Text: IF db_id(N'MetopeAzureDb') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MetopeAzureDb'
