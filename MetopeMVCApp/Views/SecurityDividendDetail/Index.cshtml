@model  MetopeMVCApp.Models.SecurityDividendDetailViewModel
  
@using GridMvc.Html
@{
    ViewBag.Title = "GridDividends";

    //List<SelectListItem> numOfRows = new List<SelectListItem> {
    //                   new SelectListItem { Text = "10", Value = "10" },
    //                   new SelectListItem { Text = "20", Value = "20" },
    //                   new SelectListItem { Text = "50", Value = "50" }
    //                   new SelectListItem { Text = "50", Value = "100" }
    //                   };
    List<string> _sizes = new List<string>() { "10", "20", "50", "100" };
    //ViewBag.SkipValue = ((SelectList)ViewBag.DogNames).SelectedValue ?? Convert.ToInt16(numOfRows.Skip(1).First().Value);

    ViewBag.RowsPgSelected = ((SelectList)ViewBag.RowsPerPage).SelectedValue ?? _sizes[1];

    //SelectListItem[] items = numOfRows.ToArray();
    //SelectListItem selectedItem = items.FirstOrDefault(i => i.Value == "1")
    //    ?? items[0];
}
@section Styles {
    @Styles.Render("~/Content/GridMvc")
    @Styles.Render("~/Content/datetime")
    <link href="~/Content/cssNoLines.css" rel="stylesheet" />
    <link href="~/Content/myButtons.css" rel="stylesheet" />

}
<h2>
   Security Dividend Details for @Model.SecurityDetails.Security_Name 
</h2> 
@Html.Partial("_CreateHyperLinkSDD", Model) 
 
@Html.Partial("_MsgSuccesFail", Model)

<div class="code-cut">
    @Html.Grid(Model.SecurityDividendDetail).Named("ast").Columns(columns =>
    {
        columns.Add(c => c.Dividend_Seq_Number)
            .Titled("Sequency No.").Filterable(true)
            .SetWidth(80);

        columns.Add(c => c.Dividend_Annual_Number)
            .Titled("Annual No.").Filterable(false)
            .SetWidth(80);

        columns.Add(c => c.Financial_Year)
            .Titled("Financial Year").Filterable(true)
            .SetWidth(120);
        //hides column, but use this in js:
        columns.Add(c => c.Entity_ID, true);

        columns.Add(c => c.Forecast_Ex_Dividend_Date).Titled("Forecast Ex Div Date").Filterable(true).SetWidth(150).Format("{0:dd MMM yyyy}");
        columns.Add(c => c.Actual_Ex_Dividend_Date ).Titled("Actual Ex Div Date").Filterable(true).SetWidth(150).Format("{0:dd MMM yyyy}");

        
        columns.Add(c => c.Forecast_Dividend).Titled("Forecast Dividend").Css("text-right").Filterable(false)
        .RenderValueAs(x => String.Format("<span class=\"pull-right\">{0:0,0.00}</span>", x.Forecast_Dividend)).Encoded(false)
        .Sanitized(false)
        .SetWidth(120);

        columns.Add(c => c.Actual_Dividend).Titled("Actual Dividend").Css("text-right").Filterable(false)
        .RenderValueAs(x => String.Format("<span class=\"pull-right\">{0:0,0.00}</span>", x.Actual_Dividend)).Encoded(false)
        .Sanitized(false)
        .SetWidth(120);
        
        columns.Add()
        .Encoded(false)
        .Sanitized(false)
        .SetWidth(50)
        .RenderValueAs(c => @<u>
            @Html.ActionLink("Edit", "Edit", "SecurityDividendDetail", new { EntityId = c.Entity_ID, SecurityId = c.Security_ID,  DivSeqNo = c.Dividend_Seq_Number, Nav = @ViewBag.Nav }, null)
        </u>);
        columns.Add()
     .Encoded(false)
     .Sanitized(false)
     .SetWidth(50)
     .RenderValueAs(c => @<u>
        @Html.ActionLink("Delete", "Delete", "SecurityDividendDetail", new { EntityId = c.Entity_ID, SecurityId = c.Security_ID, DivSeqNo = c.Dividend_Seq_Number, Nav = @ViewBag.Nav }, null)
    </u>); 
    }).Sortable(true)
</div> 
@*@using (Html.BeginForm("Manage", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))*@
<div class="container">
    <div class="row">
        <br />
        @using (Html.BeginForm("RunSp", "SecurityDividendDetail", new { SecurityId = @Model.SecurityDetails.Security_ID }, FormMethod.Post, null))
        {
            <div class="col-md-6 ">
                @Html.ActionLink("Back to Securities", "Index", "SecurityDetail")
            </div>
            @Html.Hidden("Security_ID", Model.SecurityDetails.Security_ID);

            <div class="col-md-6 pull-right "> 
                @Html.Partial("_StoredProcButtons", new MetopeMVCApp.Models.SPNames { SPName1 = "Update Divnd Sched only"  } )


            </div>
        }
    </div></div>
    @*  <div class="col-md-offset-3 pull-right ">  *@
